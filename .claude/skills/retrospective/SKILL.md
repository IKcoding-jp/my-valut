---
name: retrospective
description: >-
  週次レトロスペクティブ＆学習戦略の自動最適化。「振り返り」「今週どうだった？」
  「レトロスペクティブ」「戦略見直し」等で起動。過去1週間の学習記録・ダッシュボード・
  memory_logsを横断分析し、「伸びた分野」「停滞分野」「新弱点」を特定。
  学習計画の修正提案を生成する。週の最初のセッションでも自動提案する。
---

# 週次レトロスペクティブ（retrospective）

「記録する」だけでなく「記録から学び、計画を修正する」フィードバックループを実現するスキル。
データドリブンで学習戦略を継続的に最適化する。

---

## トリガー

以下の発言で起動:
- 「振り返り」「今週どうだった？」「レトロスペクティブ」
- 「戦略見直し」「計画を修正」「進捗分析」
- 「先週の反省」「成長してる？」
- 週の最初のセッション時に recommendation スキルから「週次振り返りがまだです」と提案

---

## 実行フロー

### Step 1: データ収集（対象期間の特定）

対象期間を特定する:
- 明示的に「先週」「今週」等の指定があればそれに従う
- 指定なし → 直近7日間

読み込むファイル:
1. `learning_progress.md` — 現在のダッシュボード数値
2. `学習記録/` — 対象期間の全日次記録
3. `docs/memory_logs.md` — 対象期間のマイルストーン・合意事項
4. `学習計画表.md` — 週別スケジュール（計画 vs 実績の比較用）
5. `questions/` — 対象期間に更新された問題ファイル（last_attempt で絞り込み）

### Step 2: 定量分析

以下の指標を算出する:

#### 2a. 学習量の分析

| 指標 | 算出方法 |
|------|----------|
| 学習日数 | 対象期間中の学習記録がある日数 |
| 解いた問題数 | セッション履歴から合計 |
| 学習時間（推定） | セッション履歴の時間を合計 |
| 計画達成率 | 学習計画表のスケジュール vs 実際の進捗 |

#### 2b. 正答率の変化

| 指標 | 算出方法 |
|------|----------|
| 週初め正答率 | 対象期間最初のセッションの正答率 |
| 週末正答率 | 対象期間最後のセッションの正答率 |
| 変化量 | 週末 - 週初め（+/-で表示） |
| 分野別変化 | 各分野の正答率推移（↑↓→で可視化） |

#### 2c. 分野別トレンド分析

対象期間中の問題ファイル（last_attempt が期間内）を分野ごとに集計:

```
改善トレンド = 直近3回の正答率の傾き
  ↑ 上昇傾向（+5%以上）: 効果あり、継続
  → 横ばい（±5%以内）: 停滞、アプローチ変更を検討
  ↓ 下降傾向（-5%以上）: 要注意、原因分析が必要
```

### Step 3: 定性分析

#### 3a. 間違いパターンの変化

- 今週の主な間違いパターンTOP 3
- 先週と比較して新たに出現したパターン
- 減少したパターン（改善の兆候）

#### 3b. 危険問題の変化

- 新たに発生した危険問題
- 解消された危険問題（復習で克服）
- 継続中の危険問題（未対策）

#### 3c. 概念混同リストの変化

- 新たに追加された混同ペア
- 克服された混同ペア

#### 3d. 心理状態の変化（memory_logs.mdから）

- モチベーションの高低
- つまずきや挫折の記録
- 自信を持てた瞬間

### Step 4: レトロスペクティブレポート生成

```
📊 週次レトロスペクティブ（MM/DD 〜 MM/DD）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📈 この1週間の成果:
  ・学習日数: X/7日
  ・解いた問題: XX問
  ・全体正答率: XX% → XX%（±XX%）

🏆 伸びた分野 TOP 3:
  1. [分野名]: XX% → XX%（+XX%）↑
     要因: [なぜ伸びたか]
  2. [分野名]: XX% → XX%（+XX%）↑
  3. [分野名]: XX% → XX%（+XX%）↑

⚠️ 停滞・後退している分野:
  1. [分野名]: XX% → XX%（±XX%）→/↓
     原因仮説: [なぜ停滞しているか]
     提案: [具体的なアクション]

🔄 間違いパターンの変化:
  ・改善: [減ったパターン]
  ・要注意: [増えたor新出パターン]

🧠 メタ認知メモ:
  ・[今週の重要な気づき]
  ・[学習方法で効果があったこと]
  ・[効果がなかったこと]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 来週の戦略提案:

1️⃣ [最優先アクション]
   根拠: [データに基づく理由]

2️⃣ [2番目のアクション]
   根拠: [理由]

3️⃣ [3番目のアクション]
   根拠: [理由]

⏰ 試験まであと XX 日
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Step 5: 戦略修正の提案と合意

レポート表示後、以下を確認:

1. 「この分析で気になる点はありますか？」
2. 戦略提案に対する合意を取る
3. 合意された変更点を具体化:
   - 学習計画表の週別スケジュールへの反映案を提示
   - recommendation スキルの優先度に影響する変更点を明示

### Step 6: 記録と保存

1. **memory_logs.md に追記**:
   ```
   - **YYYY-MM-DD（週次レトロスペクティブ W[XX]）**:
     - 成果: [1行サマリー]
     - 課題: [1行サマリー]
     - 戦略変更: [合意された変更点]
   ```

2. **学習記録/YYYY-MM-DD.md に追記**（当日の学習記録にレトロスペクティブ実施を記録）

---

## recommendation スキルとの連携

recommendation スキルのステップ1（データ読み込み）時に以下をチェック:

- memory_logs.md の最新エントリに「週次レトロスペクティブ」が **7日以上前** or **未実施**
  → 推奨TOP3の前に「💡 週次振り返りがまだです。先に振り返りをしますか？」と提案

これにより、レトロスペクティブの実施漏れを防ぐ。

---

## 直前期（残り7日以下）の特別対応

残り7日以下では「週次」ではなく「毎日」のミニレトロを推奨:

```
⚡ 直前期デイリーチェック（MM/DD）
━━━━━━━━━━━━━━━━━━━━━━
📊 今日の結果: XX問 / 正答率 XX%
📈 伸びた: [分野]
⚠️ 要注意: [分野]
🎯 明日の集中ポイント: [1つだけ]
━━━━━━━━━━━━━━━━━━━━━━
```

---

## 注意事項

- このスキルは **memory_logs.md と学習記録への追記のみ** 行う（learning_progress.md は更新しない）
- 学習計画表.md への直接編集は **ユーザーの合意を得てから** 行う
- 分析結果は客観的データに基づく（主観的な評価は避ける）
- 説明の4ルール（中学生レベル・数式よりロジック等）はこのスキルでも適用

---

## 他スキルとの連携

| スキル | 連携内容 |
|--------|----------|
| recommendation | 週次振り返り未実施の検知・提案 |
| study | セッション終了時のリフレクション結果を分析対象に含む |
| mistake-review | 間違いパターンの週次変化を分析に活用 |
| mental-coach | 心理状態の週次変化を分析対象に含む |
| daily-report | 日次記録を週次分析のデータソースとして使用 |

---

*最終更新: 2026-01-31*
