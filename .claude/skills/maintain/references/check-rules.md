# Vault チェックルール完全リスト

Vault健全性チェックで実行される全10項目のルール定義。CLAUDE.mdの管理原則を実装可能な形式に変換。

---

## 1. 命名規則チェック（7パターン）

### 1-1. デイリージャーナル命名規則

**ルール**: `journal/YYYY/MM/YYYY-MM-DD.md`

**チェック方法**:
```
journal/配下のすべての*.mdファイルに対して:
- パターン: ^journal/\d{4}/\d{2}/\d{4}-\d{2}-\d{2}\.md$
- 違反: journal/2026-02-01.md (年月フォルダなし)
- 違反: journal/YYYY/MM/daily.md (命名規則不適合)
```

**修正案**: ファイル移動 + wikilinkアップデート

---

### 1-2. 読書感想ファイル命名規則

**ルール**: `reading/読書感想_[書名].md`

**チェック方法**:
```
reading/配下のすべての*.mdファイルに対して:
- 読書感想_で始まる: OK
- 違反: reading/[書名].md, reading/[書名]_感想.md
```

**修正案**: ファイル移動

---

### 1-3. プロジェクトディレクトリ命名規則

**ルール**: `projects/[プロジェクト名]/` かつ必ず `README.md` を含む

**チェック方法**:
```
projects/配下のすべてのサブディレクトリに対して:
- README.md が存在: OK
- 存在しない: 警告
- 存在するが内容が「テンプレート」のままの場合も警告
```

**修正案**: README.md作成の提案

---

### 1-4. テンプレートファイル命名規則

**ルール**: `[フォルダ]/_template_[名前].md`

**チェック方法**:
```
すべてのディレクトリ配下を走査:
- _template_で始まるファイル: OK
- template_で始まる（アンダースコアなし）: 警告
```

**修正案**: ファイル移動

---

### 1-5. 学習記録ファイル命名規則

**ルール**: `learning/学習記録/YYYY-MM-DD.md`

**チェック方法**:
```
learning/学習記録/配下のすべての*.mdファイル:
- パターン: ^\d{4}-\d{2}-\d{2}\.md$
- 違反: 2026-02-1.md (0パディングなし)
- 違反: 2026_02_01.md (ハイフン以外の区切り文字)
```

**修正案**: ファイル移動 + 学習記録内のセッション参照の更新

---

### 1-6. 過去問ファイル命名規則

**ルール**: `learning/questions/[科目]/[分野]/[ID].md`

**チェック方法**:
```
learning/questions/配下のすべての*.mdファイル:
- 想定パス深さ: 3階層（科目/分野/ID.md）
- 違反: learning/questions/Q001.md (分野フォルダなし)
- 違反: learning/questions/kamoku_a/Q001.md (分野フォルダなし)
```

**修正案**: 自動分類ロジック（frontmatterの科目・分野情報から判定）

---

### 1-7. その他ファイル命名規則

**ルール**: 
- アルファベット大文字で始まるファイル名はすべて `.md` 拡張子
- スペースを含むファイル名は推奨されない（やむを得ない場合はURLエンコード対応）
- 日本語ファイル名はOK

**チェック方法**:
```
すべてのファイルを走査:
- 拡張子がない or 非標準拡張子（.txt, .doc等）
- スペースを含むが `_` に置換可能な場合: 警告
```

---

## 2. Frontmatter完備チェック（領域別必須フィールド）

### 2-1. profile/ 配下のファイル

**必須フィールド**: `tags`

**推奨フィールド**: `created`, `updated`

**チェック方法**:
```
profile/配下のすべての*.mdファイル:
- タグが定義されているか
- タグが「標準タグ体系」に含まれているか
```

**修正案**: frontmatter追加（existing contentは保持）

---

### 2-2. journal/ 配下のファイル

**必須フィールド**: `tags`, `mood` (optional), `date`

**推奨フィールド**: `created`, `updated`, `weather`, `energy_level`

**チェック方法**:
```
journal/YYYY/MM/配下のすべての*.mdファイル:
- frontmatterが存在
- tagsフィールドが存在
- dateフィールドが存在し、ファイル名と整合
```

**修正案**: frontmatter追加（テンプレートから）

---

### 2-3. learning/questions/ 配下のファイル

**必須フィールド**: `exam_id`, `question_id`, `topic`, `tags`, `correct_answer`, `difficulty`, `status`

**推奨フィールド**: `created`, `last_attempt`, `confidence_history`, `result_history`, `explanation`, `related_concepts`

**チェック方法**:
```
learning/questions/配下のすべての*.mdファイル:
- frontmatterが存在
- 必須フィールドがすべて定義されているか
- statusが指定リスト内か（not_attempted/attempted/struggled/mastered）
```

**修正案**: frontmatter追加（過去問道場CSVから自動生成可能）

---

### 2-4. learning/学習記録/ 配下のファイル

**必須フィールド**: `date`, `tags`, `session_count`

**推奨フィールド**: `created`, `updated`, `total_time`, `accuracy_rate`

**チェック方法**:
```
learning/学習記録/配下のすべての*.mdファイル:
- frontmatterが存在
- dateフィールドが存在し、ファイル名と整合
```

**修正案**: frontmatter追加

---

### 2-5. reading/, entertainment/ 配下のファイル

**必須フィールド**: `tags`, `status`

**推奨フィールド**: `created`, `updated`, `date_completed`, `rating` (entertainment)

**チェック方法**:
```
reading/, entertainment/ 配下のすべての*.mdファイル:
- frontmatterが存在
- tagsフィールドが存在
- statusが指定リスト内か
```

**修正案**: frontmatter追加

---

## 3. Wikilink活用チェック

### 3-1. リンク切れ検出

**ルール**: すべての `[[...]]` 形式リンクは対象ファイルが存在する必要がある

**チェック方法**:
```
Vault全体のすべての*.mdファイルを走査:
- 正規表現: \[\[([^\[\]]+)\]\]で全wikilinksを抽出
- 各リンク先ファイルが存在するか確認
- 存在しない場合: リンク切れとして報告
- ただし、セクションリンク （[[ファイル#セクション]]）は存在確認後にセクション名も確認
```

**修正案**:
- 削除済みファイルへのリンク: リンク削除
- 存在するが別ファイルへの参照: 正しいファイルパスへ修正
- セクション名不一致: セクション名を正しく修正

---

### 3-2. wikilink活用度の分析

**ルール**: 各領域で期待されるwikilink数に対する実装状況を分析

**期待値**:
- `profile/` ファイル間：相互参照（最小3リンク以上）
- `CLAUDE.md` → 各領域への参照：最低 XX リンク以上
- 学習関連ファイル → memory_logs.md への参照：月次以上
- learning/学習計画書_資格同時取得.md → learning/進捗ログ.md への参照：必須

**チェック方法**:
```
各ファイルの[[]]カウント:
- profile/配下: 最小3リンク期待
- CLAUDE.md: 最小15リンク期待
- learning/配下: 通常2-5リンク期待
- 期待値より明らかに少ない: 警告
```

**修正案**: 構造見直しの提案

---

## 4. タグ体系統一チェック

### 4-1. 標準タグ体系との照合

**標準タグ一覧** (CLAUDE.mdから抽出):

**カテゴリタグ** (18種):
- `#learning/基本情報`
- `#learning/コーヒーマイスター`
- `#project/roast-plus`
- `#project/おくすりずむ`
- `#reading/感想`
- `#reading/リスト`
- `#entertainment/アニメ`
- `#entertainment/映画`
- `#entertainment/ゲーム`
- `#entertainment/その他`
- `#health/習慣`
- `#health/服薬`
- `#health/体重`
- `#journal/日報`
- `#journal/感想`
- `#journal/計画`
- `#idea/個人開発`
- `#idea/資格`

**ステータスタグ** (4種):
- `#status/進行中`
- `#status/完了`
- `#status/保留`
- `#status/アイデア`

**優先度タグ** (3種):
- `#priority/高`
- `#priority/中`
- `#priority/低`

**チェック方法**:
```
Vault全体のすべての*.mdファイルを走査:
- 正規表現: #[\w/]+で全タグを抽出
- 各タグが標準タグ体系に含まれているか確認
- 非標準タグが見つかった場合: リスト化
  例: #learning/FE （非標準）→ #learning/基本情報 へのマッピング提案
```

**修正案**:
- 完全な非標準タグ: `#status/不具合` など → 最近い標準タグへマッピング提案
- 実装ルール：ユーザー確認後に自動置換

---

### 4-2. タグ付与率の分析

**ルール**: frontmatterに最低1つはタグが付与されている必要がある

**チェック方法**:
```
すべての*.mdファイル:
- frontmatterのtagsフィールドが存在且つ空でないか
- 存在しない場合: タグ付与率の計算対象外とする（frontmatter不備で既に検出）
```

---

## 5. リンク切れ詳細チェック（重複確認）

前述の「3-1. リンク切れ検出」と重複しないよう、**セクションリンクの整合性チェック** に特化。

**ルール**: `[[ファイル#セクション]]` 形式のリンク先セクションが実際に存在

**チェック方法**:
```
セクションリンク（#を含むwikilink）について:
- リンク先ファイルが存在するか
- リンク先セクション名がそのファイル内に存在するか
- セクション名の大文字小文字や記号が正確か
```

**修正案**: セクション名の修正 or リンク削除

---

## 6. 重複情報チェック

### 6-1. profile/ 内の重複情報

**チェック対象ペア**:
- `基本情報.md` ↔ `キャリアロードマップ.md` （資格・スキル）
- `基本情報.md` ↔ `開発活動.md` （技術スタック）
- `価値観と人生.md` ↔ `キャリアロードマップ.md` （人生観・キャリア目標）

**チェック方法**:
```
各ペアについて TF-IDF 類似度を計算:
- 150行以上のファイルは文字単位で重複チェック
- 100行以下のファイルは完全一致チェック
- 類似度が0.3以上の場合: 警告
```

**修正案**: 情報源を統一し、他ファイルからはwikilink参照に変更

---

### 6-2. learning/ 内の重複情報

**チェック対象**:
- `学習計画書_資格同時取得.md` ↔ `進捗ログ.md` （週別スケジュール）
- `学習計画書_資格同時取得.md` ↔ `memory_logs.md` （マイルストーン）

**チェック方法**:
```
各ペアについて:
- 同じ情報が2箇所に記載されているか検出
- 更新日時が異なる場合: どちらが最新か判定
```

**修正案**: 最新情報を残し、他はwikilink参照に変更

---

## 7. テンプレート遵守チェック

### 7-1. デイリージャーナルテンプレート

**テンプレートファイル**: `journal/_template_daily.md`

**チェック項目**:
- 必須セクション（# で始まるセクション）がテンプレート通りに存在
- セクション名が正確に一致

**チェック方法**:
```
journal/YYYY/MM/YYYY-MM-DD.md について:
- テンプレート内のセクション構造と比較
- セクション数、順序、名前が一致するか確認
```

**修正案**: テンプレート構造の補正を提案

---

### 7-2. 学習記録テンプレート

**テンプレートファイル**: `learning/学習記録/_template_daily.md` (存在する場合)

**チェック項目**: 同上

---

## 8. 未運用領域チェック

### 8-1. ジャーナル運用状況

**ルール**: `journal/YYYY/MM/` に月間最低X件以上の記録がある

**チェック方法**:
```
journal/配下:
- 現在の月（2026年2月）: 最低1件以上（月始なので緩和）
- 過去の月（2025年以降）: 月間平均5件以上
- 記録がない月: 警告
```

**修正案**: 「デイリージャーナルを始めませんか？」の提案

---

### 8-2. その他領域の運用確認

**チェック項目**:
- `reading/` : ファイル数が5以下の場合: 警告
- `entertainment/` : 記録更新が30日以上ない場合: 警告
- `projects/` : README内容が「テンプレート」のままの場合: 警告

---

## 9. 編集禁止エリアチェック

**禁止エリア**:
- `.obsidian/` 配下のすべてのファイル
- `LINE/` 配下のすべてのファイル（同期フォルダ）

**チェック方法**:
```
以下が手動編集されていないか確認:
- .obsidian内のファイルのgit history を確認（最終編集者がClaude以外の場合：警告）
- LINE内のファイルのlast_modifiedが期待値から逸脱していないか
```

**修正案**: ユーザー確認後、手動編集を取り消す提案

---

## 10. 学習記録 と memory_logs の役割分担チェック

### 10-1. 役割分担の確認

**正しい配置**:
- `learning/学習記録/YYYY-MM-DD.md` → セッション内の詳細ログ（問題ごとの正誤、つまずき詳細）
- `memory_logs.md` (ルート直下) → プロジェクト全体の長期記憶（方針変更、合意事項、心理状態の変化）

**チェック方法**:
```
学習記録ファイルを走査:
- 「今日の計画」「戦略変更」「方針変更」などの内容が含まれているか
- 含まれている場合：その情報がmemory_logs.mdにも記録されているか確認

memory_logs.mdを走査:
- 重複する詳細ログ情報が含まれていないか
- 逆に、重要な方針変更がmemory_logsに記録されていないか確認
```

**修正案**: 情報の再配置 + wikilink参照の追加

---

## スコア算出時の参照

各チェックルール項目が「健全性スコア」に対応。詳細は `scoring.md` を参照。

---

*最終更新: 2026-02-01*
