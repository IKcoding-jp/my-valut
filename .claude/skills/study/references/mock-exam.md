# 模試モード

## 目次

1. [模試の種類](#模試の種類)
2. [模試実行フロー](#模試実行フロー)
3. [模試中の特別ルール](#模試中の特別ルール)
4. [時間管理](#時間管理)
5. [採点・レポート生成](#採点レポート生成)
6. [レポートテンプレート](#レポートテンプレート)
7. [弱点分析](#弱点分析)
8. [弱点分析レポートフォーマット](#弱点分析レポートフォーマット)

---

## 模試の種類

| モード | 問題数 | 制限時間 | 1問目安 | 用途 |
|--------|--------|----------|---------|------|
| 科目A本番準拠 | 60問 | 90分 | 1.5分 | 本番シミュレーション |
| 科目A短縮版 | 20問 | 30分 | 1.5分 | 日常的な力試し |
| 科目B本番準拠 | 20問 | 100分 | 5分 | 本番シミュレーション |
| 科目B短縮版 | 5問 | 25分 | 5分 | 日常的な力試し |
| 統合模試 | 60+20問 | 190分 | - | 最終仕上げ |

---

## 模試実行フロー

### 開始

1. **モード選択を確認** - コマンドで開始（例: `科目A模試 本番準拠`）
2. **問題抽出方式を選択**:
   - **ランダム**: 全問題からランダム抽出
   - **弱点重点**: 優先度スコア高い分野から70%、それ以外から30%
3. **問題抽出**:
   - `questions/kamoku_a/` or `kamoku_b/` から抽出
   - 問題数が不足する場合 → 確認ダイアログを表示
   - 出題順をランダムシャッフル
4. **模試開始宣言**:

```
📝 模試を開始します
モード: [科目A本番準拠]
問題数: [60問]
制限時間: [90分]
────────────────────
⏱ タイマー開始: [HH:MM]
⏱ 終了予定: [HH:MM]
────────────────────
💡 模試中は解説なし。解答のみ記録します。
途中で中断する場合は「模試中断」と入力してください。
```

### 解答中

5. **問題を1問ずつ表示**:
   - 問題番号と残り問題数: 「【第 X 問 / 全 Y 問】」
   - 科目Bは擬似言語コードも表示
   - 解答のみ受け付け（対話・解説なし）
   - 自信度の確認なし

6. **中断処理**: 「模試中断」コマンドで中断可能。回答済みの問題のみ採点。

### 採点

7. **全問終了 or 時間切れ後**:
   - 一括採点を実行
   - 分野別正答率を集計
   - 模試結果レポートを生成
   - 問題ファイルの frontmatter を更新（result_history, last_attempt）
   - `learning_progress.md` を更新
   - `学習記録/YYYY-MM-DD.md` に結果を記録

---

## 模試中の特別ルール

通常モードとの違い:

| 項目 | 通常モード | 模試モード |
|------|-----------|-----------|
| ソクラテス式対話 | あり | **なし** |
| 自信度確認 | あり | **なし** |
| 即時解説 | あり | **なし** |
| 重点復習対象追加 | あり | **なし** |
| 時間制限 | 目安のみ | **厳守** |

### 模試後の復習フロー

1. レポート表示後、「模試の復習を開始」コマンドで復習モードに移行
2. 不正解の問題を1問ずつ、通常モードと同じ対話方式で復習
3. 復習時にメタ認知記録を実行
4. 全問復習後、弱点分析を更新

---

## 時間管理

| タイミング | 通知内容 |
|-----------|----------|
| 10問ごと | `⏱ 10問完了 \| 経過: XX分 \| 残り: YY分 \| ペース: Z分/問` |
| 残り10分 | `⚠️ 残り10分です。未回答の問題があれば急ぎましょう。` |
| 残り5分 | `⚠️ 残り5分！ 未回答は不正解として処理されます。` |
| 時間切れ | `⏱ 時間切れです。模試を終了します。` → 未回答は不正解扱い |

---

## 採点・レポート生成

### 手順

1. **採点データ集計**: 科目別正答数・正答率、分野別正答率、所要時間、未回答数
2. **合否判定**: 合格ライン 60%（600点/1000点相当）
   - 判定記号: ◎(80%+) / ○(60-79%) / △(40-59%) / ×(0-39%)
3. **レポートファイル生成**: `模試結果/YYYY-MM-DD_[モード名].md`
4. **learning_progress.md** の「模試結果履歴」を更新
5. **弱点分析を実行**

### 自動コメント生成ルール

| 判定 | コメント |
|------|---------|
| ◎ (80%+) | ✅ 安定。維持すればOK |
| ○ (60-79%) | 📘 合格圏内。あと少し強化を |
| △ (40-59%) | ⚠️ 要注意。重点復習が必要 |
| × (0-39%) | 🔴 危険。集中的な対策が必要 |

---

## レポートテンプレート

```markdown
## 模試結果レポート

実施日時: YYYY-MM-DD HH:MM
モード: [科目A本番準拠 / 科目B本番準拠 / 統合模試 / etc.]
所要時間: XX分 / 制限時間YY分
問題抽出方式: [ランダム / 弱点重点]

### 総合結果

| 科目 | 正答数 | 問題数 | 正答率 | 合格ライン(60%) | 判定 |
|------|--------|--------|--------|-----------------|------|
| 科目A | XX | 60 | XX% | +X% / -X% | ◎/○/△/× |
| 科目B | XX | 20 | XX% | +X% / -X% | ◎/○/△/× |

### 科目A 分野別結果

| 分野 | 正答 | 出題 | 正答率 | 判定 | コメント |
|------|------|------|--------|------|----------|
| 基礎理論 | X | X | XX% | ◎/○/△/× | [自動コメント] |
| コンピュータシステム | X | X | XX% | ... | ... |
| データベース | X | X | XX% | ... | ... |
| ネットワーク | X | X | XX% | ... | ... |
| セキュリティ | X | X | XX% | ... | ... |
| 開発技術 | X | X | XX% | ... | ... |
| マネジメント | X | X | XX% | ... | ... |
| ストラテジ | X | X | XX% | ... | ... |

### 科目B 分野別結果

| 分野 | 正答 | 出題 | 正答率 | 判定 | コメント |
|------|------|------|--------|------|----------|
| アルゴリズム（16問中） | X | 16 | XX% | ◎/○/△/× | [自動コメント] |
| セキュリティ（4問中） | X | 4 | XX% | ◎/○/△/× | [自動コメント] |

### 時間分析

| 指標 | 科目A | 科目B |
|------|-------|-------|
| 平均回答時間 | XX秒/問（目安90秒） | XX秒/問（目安300秒） |
| 最速回答 | XX秒（第X問） | XX秒（第X問） |
| 最遅回答 | XX秒（第X問） | XX秒（第X問） |
| 未回答 | X問 | X問 |
| 時間余り/不足 | +X分 / -X分 | +X分 / -X分 |

### 間違えた問題一覧

| # | 問題ID | 分野 | あなたの解答 | 正解 | 推定パターン |
|---|--------|------|------------|------|-------------|
| 1 | R05_KA_Q01 | セキュリティ | ア | ウ | 概念混同 |

### 前回模試との比較（2回目以降）

| 指標 | 前回 | 今回 | 変化 |
|------|------|------|------|
| 科目A正答率 | XX% | XX% | +X% / -X% |
| 科目B正答率 | XX% | XX% | +X% / -X% |
| 最大弱点分野 | [分野名] | [分野名] | 改善/悪化/変化なし |

### 優先復習リスト（重要度順）

1. 🔴 **[分野名]**: 正答率XX%（目標60%に対して-XX%）
   - 対象問題: [問題ID一覧]
   - 推奨: [具体的な学習アクション]
2. 🟡 **[分野名]**: 正答率XX%
   - 対象問題: [問題ID一覧]
   - 推奨: [具体的な学習アクション]

### 次回学習の推奨

- **最優先分野**: [分野名]
- **推奨問題数**: XX問
- **推奨学習時間**: XX分
- **推奨モード**: [通常学習 / 弱点重点 / 模試再実施]
```

---

## 弱点分析

### 実行タイミング

- 模試終了後（レポート生成の一環として）
- 「弱点分析を実行」コマンド実行時
- Phase 3期間中のセッション開始時（2/17〜2/21）

### 分析手順

**ステップ1: データ収集**
- `learning_progress.md` のダッシュボードを読み込む
- 全問題ファイルの frontmatter を集計
- 模試結果履歴・危険問題リスト・概念混同リストを読み込む

**ステップ2: 分野別弱点スコア計算**

> **注意**: この「弱点スコア」は模試後の弱点ランキング・対策プラン用です。通常学習時の出題順序を決める「優先度スコア」（`references/dashboard.md` で定義）とは別の計算式です。

```
弱点スコア = (100 - 正答率) × 0.4
           + (100 - 理解度) × 0.3
           + 危険問題数 × 15
           + 概念混同回数 × 10
           + (出題頻度係数 - 0.5) × 20
```

※ スコアが高いほど弱点度が高い

**ステップ3: 弱点ランキング生成**

| レベル | スコア | 意味 |
|--------|--------|------|
| 🔴 最優先 | 80+ | 集中対策が必要 |
| 🟡 要注意 | 50-79 | 追加学習を推奨 |
| 🟢 安定 | 0-49 | 現状維持でOK |

**ステップ4: 対策プラン生成**

弱点の種類に応じた対策:
- 正答率が低い → その分野の問題を重点的に解く
- 危険問題がある → 危険問題を最優先で復習
- 概念混同がある → 比較カードを復習、混同ペアの違いを再確認
- 理解度が低い → 参考書の該当箇所を再読

**ステップ5: 残り日数に応じた優先順位調整**

| 残り日数 | 戦略 |
|----------|------|
| 7日以上 | 全弱点分野に均等に時間配分 |
| 4-6日 | 上位3分野に集中 |
| 1-3日 | 最優先の1-2分野のみ。残りは「捨てる判断」を提案 |
| 前日 | 軽い確認のみ。新しいことはやらない |

---

## 弱点分析レポートフォーマット

```markdown
## 弱点分析レポート
分析日時: YYYY-MM-DD HH:MM
試験まであと: XX日

### 弱点ランキング

| 順位 | 分野 | 弱点スコア | 正答率 | 理解度 | 危険 | 混同 | レベル |
|------|------|-----------|--------|--------|------|------|--------|
| 1 | [分野] | XX | XX% | XX% | X件 | X件 | 🔴最優先 |
| 2 | [分野] | XX | XX% | XX% | X件 | X件 | 🟡要注意 |

### 残り日数に基づく対策プラン

**残り XX 日の最適戦略:**

#### 🔴 最優先対策（今日から取り組む）
- **[分野名]**: [具体的なアクション]
  - 対象問題: [問題ID一覧]
  - 推奨時間: XX分/日
  - 教材: [かやのき先生 p.XXX / 出るとこだけ 第X章]

#### 🟡 できれば対策（余裕があれば）
- **[分野名]**: [具体的なアクション]

#### 🏳️ 戦略的に捨てる（時間が足りない場合）
- **[分野名]**: この分野は出題数が少なく、他の分野の得点で補える
  - 捨てた場合の影響: 最大 -X 問（全体の X%）

### 重点復習リスト
以下のカードを試験前日までに毎日復習:
1. [カードファイル名]: [内容の概要]

### 模試スコア推移（模試実施済みの場合）

| 回 | 日付 | 科目A | 科目B | 総合 |
|----|------|-------|-------|------|
| 1 | 2/16 | XX% | XX% | XX% |
```
