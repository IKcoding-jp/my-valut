# ダッシュボード更新手順

## 目次

1. [更新タイミング](#更新タイミング)
2. [frontmatter更新](#frontmatter更新)
3. [科目Aダッシュボード再計算](#科目aダッシュボード再計算)
4. [科目Bダッシュボード再計算](#科目bダッシュボード再計算)
5. [セッション履歴](#セッション履歴)
6. [出題頻度係数テーブル](#出題頻度係数テーブル)
7. [優先度スコア計算](#優先度スコア計算)

---

## 更新タイミング

`learning_progress.md` を **必ず** 更新するタイミング:
- 各問題の解答後（リアルタイム）
- セッション終了時（まとめ更新）

---

## frontmatter更新

```yaml
---
last_updated: [現在日時]
total_questions_attempted: [累計解答数を +1]
total_study_time_minutes: [累計学習時間を加算]
target_exam_date: 2026-02-22
days_remaining: [今日から試験日までの日数を再計算]
---
```

---

## 科目Aダッシュボード再計算

各分野について以下を集計する:

1. `questions/kamoku_a/[分野]/` 配下の全問題ファイルを読み込む
2. 集計項目:
   - **総問題**: ファイル総数
   - **習得済**: status="習得済" の問題数
   - **理解度**: (習得済 / 総問題) × 100 [%]
   - **正答率**: (正解回数 / 総解答回数) × 100 [%]
   - **危険**: 自信高×不正解 の問題数
3. 優先度スコアを計算（[優先度スコア計算](#優先度スコア計算) 参照）

### 分野とディレクトリの対応

| 分野 | ディレクトリ | 判定条件 |
|------|-------------|----------|
| 基礎理論 | テクノロジ系/基礎理論/ | - |
| 基礎理論 | テクノロジ系/技術要素/ | field に "アルゴリズム" or "プログラミング" or "データ構造" を含む |
| コンピュータシステム | テクノロジ系/コンピュータシステム/ | - |
| コンピュータシステム | テクノロジ系/技術要素/ | field に "マルチメディア" or "情報メディア" を含む |
| データベース | テクノロジ系/技術要素/ | field に "データベース" を含む |
| ネットワーク | テクノロジ系/技術要素/ | field に "ネットワーク" を含む |
| セキュリティ | テクノロジ系/技術要素/ | field に "セキュリティ" を含む |
| 開発技術 | テクノロジ系/開発技術/ | - |
| マネジメント | マネジメント系/ | - |
| ストラテジ | ストラテジ系/ | - |

---

## 科目Bダッシュボード再計算

`questions/kamoku_b/` 配下の問題ファイルを subtopic で分類:

| 分野 | subtopic の判定条件 |
|------|---------------------|
| 探索アルゴリズム | "探索" を含む |
| 整列アルゴリズム | "ソート" or "整列" を含む |
| 再帰 | "再帰" を含む |
| データ構造 | "スタック" or "キュー" or "リスト" or "木" を含む |
| 擬似言語読解 | "擬似言語" or "構文" を含む |
| セキュリティ | type="セキュリティ" |

理解度・正答率・危険問題数の計算方法は科目Aと同様。

---

## セッション履歴

セッション終了時に以下の行を追加:

| 日付 | 科目 | 問題数 | 正答率 | 時間 | モード |
|------|------|--------|--------|------|--------|
| 2026-01-28 | A+B | 15 | 73% | 45分 | 通常 |

---

## 出題頻度係数テーブル

### 科目A

| 分野 | 係数 | 備考 |
|------|------|------|
| セキュリティ | 1.5 | 最重要・毎回出題 |
| ネットワーク | 1.3 | |
| データベース | 1.2 | |
| コンピュータシステム | 1.1 | |
| 基礎理論 | 1.0 | |
| 開発技術 | 1.0 | |
| マネジメント | 0.8 | |
| ストラテジ | 0.8 | |

### 科目B

| 分野 | 係数 |
|------|------|
| 探索アルゴリズム | 1.3 |
| 整列アルゴリズム | 1.3 |
| データ構造 | 1.2 |
| 再帰 | 1.1 |
| 擬似言語読解 | 1.0 |
| セキュリティ | 1.0 |

---

## 優先度スコア計算（出題優先度）

> **注意**: この「優先度スコア」は **通常学習時の出題順序** を決めるためのスコアです。
> 模試後の「弱点スコア」（`references/mock-exam.md` で定義）とは別の計算式です。
>
> | スコア名 | 用途 | 定義元 |
> |---------|------|--------|
> | **優先度スコア** | 通常学習時の出題順序決定 | このファイル（dashboard.md） |
> | **弱点スコア** | 模試後の弱点ランキング・対策プラン | mock-exam.md |

```
優先度スコア = (100 - 分野理解度) × 出題頻度係数 × 弱点係数
```

弱点係数: 危険問題がある分野は ×1.5

### ラベル判定

| スコア | ラベル |
|--------|--------|
| 150+ | 最高 |
| 100-149 | 高 |
| 50-99 | 中 |
| 0-49 | 低 |

---

## CSVインポートによる一括更新

過去問道場の「成績レポートCSV」から `learning_progress.md` を一括更新する手順。

### 手順

1. 過去問道場の成績ページからCSVをダウンロード
2. ファイルをリポジトリルートに配置（例: `report202601301952.csv`）
3. Pythonで読み込む場合は `encoding='cp932'` を指定（Shift_JIS系）
4. 各行の正誤・分野情報を集計し、`learning_progress.md` の分野別ダッシュボードに反映

### CSVカラム対応表

| カラム名 | 内容 | ダッシュボードでの用途 |
|---------|------|----------------------|
| No. | 問題番号 | 問題の一意識別 |
| 正誤 | ○ / × | 正答率の計算 |
| 系統 | テクノロジ系 / マネジメント系 / ストラテジ系 | 大分類の判定 |
| 中分類 | セキュリティ、ネットワーク等 | 分野別ダッシュボードの分野判定 |
| 小分類 | 更に詳細な分類 | field の補助情報 |
| 出典 | 「令和5年 問15」等 | 年度・問番号の特定 |
| 学習日 | 学習した日付 | セッション履歴への反映 |

### エンコーディング注意

```python
import csv
with open('report202601301952.csv', encoding='cp932') as f:
    reader = csv.DictReader(f)
    for row in reader:
        # row['正誤'], row['系統'], row['中分類'] 等でアクセス
        pass
```

### データソースの優先順位

| 優先度 | ソース | 特徴 |
|--------|--------|------|
| 1（最優先） | 過去問道場CSV | 大量の解答履歴。正答率の統計ベースとして最も信頼性が高い |
| 2 | スキル演習セッション | 個別問題の詳細記録（自信度・解答時間・メタ認知） |
| 3 | questions/ファイル | 学習状態管理（status, result_history等のfrontmatter） |
