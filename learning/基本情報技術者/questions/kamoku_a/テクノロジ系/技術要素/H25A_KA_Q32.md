---
id: H25A_KA_Q32
year: H25秋
kamoku: A
number: 32
type: 暗記
field: テクノロジ系 » データベース »トランザクション処理
difficulty: 3
status: 未学習
source: "出典：平成25年秋期 基本情報技術者試験 科目A 問32"
source_url: "https://www.fe-siken.com/kakomon/25_aki/q32.html"
last_attempt: null
confidence_history: []
result_history: []
time_spent_seconds: []
---

## 問題
表は，トランザクション1～3が資源 A～C にかけるロックの種別を表す。また，資源へのロックはトランザクションの起動と同時にかけられる。トランザクション1～3のうち二つのトランザクションをほぼ同時に起動した場合の動きについて，適切な記述はどれか。ここで，表中の"－"はロックなし，"S"は共有ロック，"X"は専有ロックを示す。![32.png/image-size:332×98](https://www.fe-siken.com/kakomon/25_aki/img/32.png)

## 選択肢
- ア: トランザクション1の後にトランザクション3を起動したとき，トランザクション3の資源待ちはない。
- イ: トランザクション2の後にトランザクション1を起動したとき，トランザクション1の資源待ちはない。
- ウ: トランザクション2の後にトランザクション3を起動したとき，トランザクション3の資源待ちはない。
- エ: トランザクション3の後にトランザクション1を起動したとき，トランザクション1の資源待ちはない。

## 正解
イ

## 解説
共有・専有の2つのロックが出てきますので違いを把握しておきましょう。
共有ロックデータを読込むときに使うロックで、この状態の場合は他のトランザクションによる更新処理ができなくなる。(読込みは可能)専有ロックデータを更新するときに使うロックで、この状態の場合は他のトランザクションによる読込みや更新ができなくなる。
資源にかけられるロックに注目して状態の推移を見ていきましょう。

### 各選択肢の解説
- ア: トランザクション3が起動したとき、トランザクション1が資源Aを共有ロックしている状態です。トランザクション3は資源Aに対して専有ロックをかけたいのでトランザクション1が資源Aのロックを解除するのを待つことになります。
- イ: 正しい。トランザクション1が使用する資源Cはロックされていない状態のため問題なし、資源Aはトランザクション2が使用していますが、それは共有ロックなのでトランザクション1がさらに読込みを行うための共有ロックをかけることは可能です。
- ウ: トランザクション3が起動したとき、トランザクション2が資源Aを共有ロックしている状態です。トランザクション3は資源Aに対して専有ロックをかけたいので、トランザクション2が資源Aのロックを解除するのを待つことになります。さらにトランザクション2も資源Bに対して専有ロックをかけている状態なので、こちらのロック解除も待つ必要があります。
- エ: トランザクション1が起動したとき、トランザクション3が資源Aを専有ロックしている状態です。資源Aに共有ロックをかけるにはトランザクション3がロック解除するのを待つ必要があります。

### 関連概念
- [[トランザクション]]
