---
id: R05_KB_Q02
year: R05
kamoku: B
number: 2
type: アルゴリズム
subtopic: バブルソート
difficulty: 3
status: 未学習
last_attempt: null
confidence_history: []
result_history: []
time_spent_seconds: []
---

## 問題

次のプログラムは、整数型の配列 `data` を昇順（小さい順）に並べ替えるバブルソートである。配列 `data` が `{6, 3, 8, 1, 5}` のとき、外側のループ（変数 `i`）が **2回完了した時点** での配列の状態として正しいものはどれか。

ただし、配列の添字は 0 から始まるものとする。

```
○bubbleSort(整数型の配列: data)
  整数型: i, j, temp
  整数型: n ← data の要素数
  for (i を 0 から n - 2 まで 1 ずつ増やす)
    for (j を n - 1 から i + 1 まで 1 ずつ減らす)
      if (data[j] < data[j - 1])
        temp ← data[j]
        data[j] ← data[j - 1]
        data[j - 1] ← temp
      endif
    endfor
  endfor
```

## 選択肢
- ア: {1, 3, 5, 6, 8}
- イ: {1, 3, 6, 5, 8}
- ウ: {1, 3, 8, 5, 6}
- エ: {1, 3, 8, 6, 5}

## 正解
イ

## 解説

### トレース過程

初期状態: `data = {6, 3, 8, 1, 5}`、`n = 5`

**--- i = 0 のパス（1回目）---**

j は 4 から 1 まで 1 ずつ減る。隣り合う要素を比較し、左が大きければ交換する。

| j | 比較 | data[j] < data[j-1]? | 交換? | 配列の状態 |
|---|------|----------------------|-------|-----------|
| 4 | data[4]=5 と data[3]=1 | 5 < 1? → 偽 | しない | {6, 3, 8, 1, 5} |
| 3 | data[3]=1 と data[2]=8 | 1 < 8? → 真 | する | {6, 3, 1, 8, 5} |
| 2 | data[2]=1 と data[1]=3 | 1 < 3? → 真 | する | {6, 1, 3, 8, 5} |
| 1 | data[1]=1 と data[0]=6 | 1 < 6? → 真 | する | {1, 6, 3, 8, 5} |

i = 0 完了後: `{1, 6, 3, 8, 5}` → 最小値 `1` が先頭に確定

**--- i = 1 のパス（2回目）---**

j は 4 から 2 まで 1 ずつ減る。

| j | 比較 | data[j] < data[j-1]? | 交換? | 配列の状態 |
|---|------|----------------------|-------|-----------|
| 4 | data[4]=5 と data[3]=8 | 5 < 8? → 真 | する | {1, 6, 3, 5, 8} |
| 3 | data[3]=5 と data[2]=3 | 5 < 3? → 偽 | しない | {1, 6, 3, 5, 8} |
| 2 | data[2]=3 と data[1]=6 | 3 < 6? → 真 | する | {1, 3, 6, 5, 8} |

i = 1 完了後: `{1, 3, 6, 5, 8}` → 2番目に小さい `3` が確定

### 正解の理由

外側ループが2回完了した時点（i = 0 と i = 1 が終了）で、配列は `{1, 3, 6, 5, 8}` になる。よって正解は **イ** である。

バブルソートでは、各パスで未確定部分の最小値が「泡のように浮き上がって」確定位置に収まる。2パス完了時点では先頭2つ（data[0] と data[1]）が確定している。

### アルゴリズムのポイント
- バブルソートは隣り合う要素を比較・交換するシンプルなソートアルゴリズム
- 1パスごとに1つの要素が確定位置に入る（この実装では先頭側から確定）
- 内側ループの方向（末尾から先頭へ）に注意。小さい値が「浮き上がる」動きをする
- トレース問題では「何パス目の後の状態か」を正確に数えることが重要
- 計算量は O(n^2) で、大きなデータには不向き

### 類似パターン
- [[選択ソート]]（各パスで最小値を見つけて先頭と交換）
- [[挿入ソート]]（適切な位置に挿入していくソート）
